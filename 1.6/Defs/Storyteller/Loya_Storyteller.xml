<?xml version="1.0" encoding="utf-8"?>

<Defs>

    <StorytellerDef ParentName="BaseStoryteller">
        <defName>NotReboot_Loya</defName>
        <label>「混乱」络亚Loya</label>
        <description>
            老实说介绍自己这种事挺尴尬的，没错，你费尽周折破解那段密文，或者说反编译得到的结果，只是让我出现在这里而已。\n\n正常走一遍流程吧，我肯定是没有Re:boot这边的编号的，而我作为Loya个体的编号也无可奉告。\n\n我个人特别喜欢计划，但是也享受随机应变带来的新鲜感，别指望我会对你有多好，就算是我最低限度的安排，也是远高于那五个人的，至于具体混乱到什么程度，你就自己慢慢感受吧。\n\n老实说前面五位一堆利好于你的福利让我顿时想不到能给你带来什么，所以请允许我任性一回——去他的心灵低语，有一个算一个都别在我眼皮子底下出现！当然，贴在你殖民地脸上的那种我就爱莫能助了（）</description>
        <portraitLarge>Storyteller/Loya/Loya_Teller</portraitLarge>
        <portraitTiny>Storyteller/Loya/Loya_TellerTiny</portraitTiny>
        <listVisible>false</listVisible>
        <listOrder>1002</listOrder>

        <adaptDaysGameStartGraceDays>25</adaptDaysGameStartGraceDays> <!--少给五天的适应天数宽限期-->

        <populationIntentFactorFromPopCurve>
            <!-- 根据人口规模计算事件强度因子 -->
            <points>
                <li>0, 8.0</li>
                <li>1, 2.0</li>
                <li>4, 1.0</li>
                <li>7, 0.35</li>
                <li>11, 0.0</li>
                <li>20, -1.0</li>
            </points>
        </populationIntentFactorFromPopCurve>
        <pointsFactorFromDaysPassed>
            <!-- 根据经过天数计算的事件强度因子 -->
            <points>
                <li>(10, 0.7)</li>
                <li>(25, 1.0)</li>
            </points>
        </pointsFactorFromDaysPassed>
        <adaptDaysLossFromColonistLostByPostPopulation>
            <!-- 根据人口损失减少适应天数 -->
            <points>
                <li>( 0, 25)</li> <!-- 30 days at normal pops; lower at really high pop -->
                <li>(11, 25)</li>
                <li>(20, 15)</li>
            </points>
        </adaptDaysLossFromColonistLostByPostPopulation>
        <pointsFactorFromAdaptDays>
            <!-- 根据适应天数计算的事件强度因子 -->
            <points>
                <li>(-30, 0.55)</li>  <!-- recover in 10 days -->
                <li>( 0, 0.85)</li>  <!-- start at     0.80  -->
                <li>( 30, 1.05)</li>  <!-- 0.5 years to 1.00  -->
                <li>( 60, 1.25)</li>  <!-- 0.5 years to 1.20  -->
                <li>(120, 1.75)</li>  <!-- 2   years to 1.60  -->
            </points>
        </pointsFactorFromAdaptDays>

        <comps>
            <!-- Intro（介绍） -->
            <li Class="StorytellerCompProperties_ClassicIntro" />
            <!-- 我自己要触发的事件 -->
            <li Class="StorytellerCompProperties_SingleOnceFixed">
                <!-- 分别在15、20、30、60天触发四次弹窗 -->
                <fireAfterDaysPassed>15</fireAfterDaysPassed>
                <incident>RebootStoryteller_TextInputEvent</incident>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_SingleOnceFixed">
                <fireAfterDaysPassed>20</fireAfterDaysPassed>
                <incident>RebootStoryteller_TextInputEvent</incident>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_SingleOnceFixed">
                <fireAfterDaysPassed>30</fireAfterDaysPassed>
                <incident>RebootStoryteller_TextInputEvent</incident>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_SingleOnceFixed">
                <fireAfterDaysPassed>60</fireAfterDaysPassed>
                <incident>RebootStoryteller_TextInputEvent</incident>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
            </li>
            <!-- Home threats（家园威胁控制） -->
            <li Class="Loyacore_RebootStoryteller.Loya.Loya_StorytellerCompProperties_OnOffCycle">
                <!-- 重大威胁频率控制 -->
                <!-- 研究本XML的朋友注意一下 原版的StorytellerCompProperties_OnOffCycle并不能配置随机 -->
                <!-- 这个是我自己用C#实现的 -->
                <!-- 如果想用我实现的这个组件 注意category只能设置为ThreatBig或者ThreatSmall -->
                <category>ThreatBig</category>
                <minDaysPassed>11.0</minDaysPassed>
                <onDays>3.8</onDays>
                <offDays>6.0</offDays>
                <minSpacingDays>1.2</minSpacingDays>
                <numIncidentsRange>1~2</numIncidentsRange>
                <forceRaidEnemyBeforeDaysPassed>20</forceRaidEnemyBeforeDaysPassed>
                <randomFactorRange>1.0~2.5</randomFactorRange> <!-- 这个字段是作用于事件生成后袭击点数的 -->
                <disallowedTargetTags>
                    <li>Map_RaidBeacon</li>
                </disallowedTargetTags>
            </li>
            <li
                Class="Loyacore_RebootStoryteller.Loya.Loya_StorytellerCompProperties_ThreatsGenerator">
                <!-- 袭击生成器 -->
                <!-- 研究本XML的朋友注意一下 原版的StorytellerCompProperties_ThreatsGenerator并不能配置随机 -->
                <!-- 这个是我自己用C#实现的 -->
                <allowedTargetTags>
                    <li>Map_RaidBeacon</li>
                </allowedTargetTags>
                <parms>
                    <allowedThreats>Raids</allowedThreats>
                    <onDays>1.0</onDays>
                    <offDays>0.5</offDays>
                    <minSpacingDays>0.04</minSpacingDays>
                    <numIncidentsRange>1~2</numIncidentsRange>
                    <minThreatPoints>500</minThreatPoints>
                </parms>
                <randomFactorRange>1.0~2.5</randomFactorRange>
                <smallThreatFactorRange>0.7f, 1.3f</smallThreatFactorRange>
            </li>
            <li Class="Loyacore_RebootStoryteller.Loya.Loya_StorytellerCompProperties_OnOffCycle">
                <!-- 小型威胁频率控制 -->
                <!-- 和上面那个一样 -->
                <category>ThreatSmall</category>
                <minDaysPassed>11.0</minDaysPassed>
                <onDays>3.8</onDays>
                <offDays>6.0</offDays>
                <numIncidentsRange>0.2~1</numIncidentsRange>
                <randomFactorRange>0.85~1.6</randomFactorRange>
                <acceptPercentFactorPerThreatPointsCurve>
                    <points>
                        <li>(800, 1)</li>
                        <li>(2800, 0)</li>
                    </points>
                </acceptPercentFactorPerThreatPointsCurve>
            </li>
            <!-- Home misc incidents（家园杂项事件） -->
            <li Class="StorytellerCompProperties_CategoryMTB">
                <!-- 基于平均时间配置事件调度 -->
                <category>Misc</category>
                <allowedTargetTags>
                    <li>Map_PlayerHome</li>
                </allowedTargetTags>
                <minDaysPassed>5</minDaysPassed>
                <mtbDays>4.8</mtbDays>
            </li>
            <li Class="StorytellerCompProperties_ShipChunkDrop" /><!-- 配置船块掉落 这里似乎是使用了系统默认行为 -->
            <li Class="StorytellerCompProperties_Disease">
                <!-- 配置人类疾病 -->
                <category>DiseaseHuman</category>
                <minDaysPassed>9</minDaysPassed>
            </li>
            <li Class="StorytellerCompProperties_Disease">
                <!-- 配置动物疾病 -->
                <category>DiseaseAnimal</category>
                <minDaysPassed>9</minDaysPassed>
            </li>
            <!-- Ally/neutral interaction（盟友/中立派系互动） -->
            <li Class="StorytellerCompProperties_FactionInteraction">
                <!-- 配置援军生成 -->
                <incident>RaidFriendly</incident>
                <baseIncidentsPerYear>15</baseIncidentsPerYear>
                <minSpacingDays>0.4</minSpacingDays>
                <fullAlliesOnly>true</fullAlliesOnly>
                <minDanger>High</minDanger>
            </li>
            <li Class="StorytellerCompProperties_FactionInteraction">
                <!-- 配置贸易商队生成 -->
                <incident>TraderCaravanArrival</incident>
                <minDaysPassed>5</minDaysPassed>
                <baseIncidentsPerYear>5</baseIncidentsPerYear>
                <minSpacingDays>6</minSpacingDays>
                <allowedTargetTags>
                    <li>Map_PlayerHome</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_FactionInteraction">
                <!-- 配置访客团生成 -->
                <incident>VisitorGroup</incident>
                <minDaysPassed>3</minDaysPassed>
                <baseIncidentsPerYear>4</baseIncidentsPerYear>
                <minSpacingDays>5</minSpacingDays>
                <allowedTargetTags>
                    <li>Map_PlayerHome</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_FactionInteraction">
                <!-- 配置旅行者事件生成 -->
                <incident>TravelerGroup</incident>
                <minDaysPassed>1</minDaysPassed>
                <baseIncidentsPerYear>6</baseIncidentsPerYear>
                <minSpacingDays>1</minSpacingDays>
                <allowedTargetTags>
                    <li>Map_PlayerHome</li>
                </allowedTargetTags>
            </li>
            <!-- Caravan / temp map（临时地图事件） -->
            <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
                <!-- 根据生物群落调整杂项(Misc)事件的生成 -->
                <category>Misc</category>
                <allowedTargetTags>
                    <li>Caravan</li>
                    <li>Map_TempIncident</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
                <!-- 根据生物群落调整小型威胁(ThreatSmall)事件的生成 -->
                <category>ThreatSmall</category>
                <applyCaravanVisibility>true</applyCaravanVisibility>
                <allowedTargetTags>
                    <li>Caravan</li>
                    <li>Map_TempIncident</li>
                </allowedTargetTags>
            </li>
            <li Class="StorytellerCompProperties_CategoryIndividualMTBByBiome">
                <!-- 根据生物群落调整大型威胁(ThreatBig)事件的生成 -->
                <category>ThreatBig</category>
                <applyCaravanVisibility>true</applyCaravanVisibility>
                <allowedTargetTags>
                    <li>Caravan</li>
                    <li>Map_TempIncident</li>
                </allowedTargetTags>
            </li>
            <!-- Quests - non-Royalty（没有皇权DL时的任务生成） -->
            <li Class="StorytellerCompProperties_RandomQuest">
                <!-- 控制基本任务赋予事件的生成 -->
                <category>GiveQuest</category>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
                <onDays>10</onDays>
                <numIncidentsRange>1</numIncidentsRange>
                <acceptFractionByDaysPassedCurve>
                    <points>
                        <li>(8, 0)</li>
                        <li>(15, 1)</li>
                    </points>
                </acceptFractionByDaysPassedCurve>
                <minSpacingDays>3</minSpacingDays>
                <disableIfAnyModActive>
                    <!-- 在皇权DLC被禁用时才会生效 -->
                    <li>Ludeon.RimWorld.Royalty</li>
                </disableIfAnyModActive>
            </li>
            <!-- Quests - Royalty（存在皇权DLC时的任务生成） -->
            <li Class="StorytellerCompProperties_RandomQuest">
                <!-- 控制基本任务赋予事件的生成 -->
                <category>GiveQuest</category>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
                <onDays>12</onDays>
                <numIncidentsRange>2</numIncidentsRange>
                <acceptFractionByDaysPassedCurve>
                    <points>
                        <li>(8, 0)</li>
                        <li>(15, 1)</li>
                    </points>
                </acceptFractionByDaysPassedCurve>
                <minSpacingDays>3</minSpacingDays>
                <enableIfAnyModActive>
                    <!-- 在皇权DLC启用时才会生效 -->
                    <li>Ludeon.RimWorld.Royalty</li>
                </enableIfAnyModActive>
            </li>
            <!-- World misc incidents（世界地图杂项事件） -->
            <li Class="StorytellerCompProperties_CategoryMTB">
                <!-- 根据事件类别计算的平均间隔时间生成杂项事件 -->
                <category>Misc</category>
                <allowedTargetTags>
                    <!-- 仅针对世界地图做设置 -->
                    <li>World</li>
                </allowedTargetTags>
                <minDaysPassed>15</minDaysPassed>
                <mtbDays>15</mtbDays>
            </li>
            <!-- Orbital trader（轨道商人事件） -->
            <li Class="StorytellerCompProperties_OnOffCycle">
                <!-- 控制轨道贸易商的生成周期 -->
                <incident>OrbitalTraderArrival</incident>
                <onDays>7</onDays>
                <offDays>8</offDays>
                <numIncidentsRange>1</numIncidentsRange>
            </li>
            <!-- Triggered（已触发，目前我只观察到这个对人死光了有作用） -->
            <li Class="StorytellerCompProperties_Triggered">
                <!-- 在人死光时送个黑衣人……卡桑德拉倒是仁慈哈 -->
                <incident>StrangerInBlackJoin</incident>
                <delayTicks>180</delayTicks>
            </li>
        </comps>
    </StorytellerDef>
</Defs>